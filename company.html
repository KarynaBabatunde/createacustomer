<!DOCTYPE html>
<html>
  <head>
    <title>Karyna Babatunde</title>
    <meta charset="UTF-8" />
    <link href="src/styles.css" rel="stylesheet" type="text/css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins&display=swap"
      rel="stylesheet"
    />
    <!-- Font Awesome cdn css -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css"
      integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div class="container">
      <header>Create a Company</header>
      <form action="">
        <input
          type="text"
          placeholder="Name"
          id="company-input"
          class="add-company"
        />
        <button type="button" id="company-button" class="btn btn-info">
          Create
        </button>
      </form>
      <br />
      <div class="dropdown">
        <input
          type="text"
          class="textBox"
          placeholder="Select a Company"
          readonly
        />
        <div class="option" id="company-list">
          <div onclick="show('Landstar')">Landstar</div>
          <div onclick="show('AFRY')">AFRY</div>
          <div onclick="show('Google')">Google</div>
          <div onclick="show('Meta')">Meta</div>
          <div onclick="show('Nexter')">Nexter</div>
          <div onclick="show('Logistics')">Logistics</div>
        </div>
      </div>

      <a
        href="list.html"
        class="btn btn-primary btn-lg active"
        role="button"
        aria-pressed="true"
        >next</a
      >
    </div>
  </body>
  <script>
    const companyInput = document.querySelector("#company-input");
    const companyButton = document.querySelector("#company-button");
    const companyList = document.querySelector("#company-list");

    companyButton.addEventListener("click", addCompany);
    document.addEventListener("DOMContentLoaded", getLocalCompanies);

    function addCompany(event) {
      event.preventDefault();
      const companyDiv = document.createElement("div");
      companyDiv.classList.add("company");
      const newCompany = document.createElement("div");
      newCompany.innerText = companyInput.value;
      newCompany.classList.add("company-item");
      companyDiv.appendChild(newCompany);
      saveLocalCompanies(companyInput.value);

      companyList.appendChild(companyDiv);
      companyInput.value = "";
    }

    function saveLocalCompanies(company) {
      let companies;
      if (localStorage.getItem("companies") === null) {
        companies = [];
      } else {
        companies = JSON.parse(localStorage.getItem("companies"));
      }
      companies.push(company);
      localStorage.setItem("companies", JSON.stringify(companies));
    }

    function getLocalCompanies() {
      let companies;
      if (localStorage.getItem("companies") === null) {
        companies = [];
      } else {
        companies = JSON.parse(localStorage.getItem("companies"));
      }
      companies.forEach(function (company) {
        const companyDiv = document.createElement("div");
        companyDiv.classList.add("company");
        const newCompany = document.createElement("div");
        newCompany.innerText = companyInput.value;
        newCompany.classList.add("company-item");
        companyDiv.appendChild(newCompany);

        companyList.appendChild(companyDiv);
      });
    }

    function show(anything) {
      document.querySelector(".textBox").value = anything;
    }
    let dropdown = document.querySelector(".dropdown");
    dropdown.onclick = function () {
      dropdown.classList.toggle("active");
    };
  </script>
</html>
